<div class="user-list-container">
  <mat-card class="user-list-card">
    <mat-card-header>
      <mat-card-title>Kullanıcı Listesi</mat-card-title>
      <div class="header-buttons">
        <button mat-flat-button color="primary" [routerLink]="['/home/users/new']" *ngIf="authService.isAdmin$ | async">
          <mat-icon>person_add</mat-icon> Yeni Kullanıcı Ekle
        </button>
      </div>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="isLoading" class="spinner-container">
        <mat-spinner></mat-spinner>
        <p>Kullanıcılar yükleniyor...</p>
      </div>

      <div *ngIf="errorMessage && !isLoading" class="error-message">
        <mat-icon color="warn">error</mat-icon>
        <p>{{ errorMessage }}</p>
      </div>

      <div *ngIf="!isLoading && !errorMessage && users.length === 0" class="no-users-message">
        <p>Henüz kayıtlı kullanıcı bulunmamaktadır.</p>
      </div>

      <mat-list *ngIf="!isLoading && !errorMessage && users.length > 0">
  <mat-list-item *ngFor="let user of users" class="mat-list-item">

  <div class="list-item-content-wrapper">
    <mat-icon matListItemIcon>person</mat-icon> 
    <div class="user-info">
      <div matListItemTitle class="username">{{ user.username }}</div>
      <div matListItemLine>{{ user.email }}</div>
      <div matListItemLine>Roller: {{ user.roles.join(', ') }}</div>
    </div>
    <div class="user-actions">
      <button mat-icon-button color="primary" [routerLink]="['/home/users/edit', user.id]" *ngIf="authService.isAdmin$ | async">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button color="warn" (click)="confirmDeleteUser(user)" *ngIf="authService.isAdmin$ | async">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>
  </mat-list-item>
</mat-list>
    </mat-card-content>
  </mat-card>
</div>
