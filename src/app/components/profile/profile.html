<!-- src/app/components/profile/profile.component.html -->
<div class="profile-container">
  <mat-card class="profile-card">
    <mat-card-header>
      <mat-card-title>Kullanıcı Profilim</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="isLoading" class="spinner-container">
        <mat-spinner></mat-spinner>
        <p>Profil bilgileri yükleniyor...</p>
      </div>

      <div *ngIf="errorMessage && !isLoading" class="error-message">
        <mat-icon color="warn">error</mat-icon>
        <p>{{ errorMessage }}</p>
        <button mat-flat-button color="primary" (click)="getUserProfile()">
          <mat-icon>refresh</mat-icon> Tekrar Dene
        </button>
      </div>

      <div *ngIf="user && !isLoading && !errorMessage" class="profile-details">
        <p><strong><mat-icon>person</mat-icon> Kullanıcı Adı:</strong> {{ user.username }}</p>
        <p><strong><mat-icon>email</mat-icon> E-posta:</strong> {{ user.email }}</p>
        <!-- Rolleri virgülle ayrılmış bir string olarak göster -->
        <p><strong><mat-icon>assignment_ind</mat-icon> Roller:</strong> {{ user.roles.join(', ') }}</p>
        <p><strong><mat-icon>event</mat-icon> Kayıt Tarihi:</strong> {{ user.createdAt | date:'short' }}</p>
      </div>
    </mat-card-content>
    <mat-card-actions *ngIf="user && !isLoading && !errorMessage">
      <button mat-flat-button color="accent" (click)="editProfile()">
        <mat-icon>edit</mat-icon> Profili Düzenle
      </button>
      <button mat-button type="button" [routerLink]="['/home']">
        <mat-icon>arrow_back</mat-icon> Geri
      </button>
    </mat-card-actions>
  </mat-card>
</div>
